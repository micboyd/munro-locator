@if (profileLoading) {
<app-loading-indicator></app-loading-indicator>
} @else {

<!-- Page wrapper -->
<div class="w-full flex justify-center">
	<div class="w-full max-w-6xl px-4 sm:px-6 lg:px-8 py-6 sm:py-8">
		<!-- Card shell -->
		<div
			class="mx-auto max-w-xl bg-white rounded-2xl border border-slate-200 shadow-[0_1px_0_rgba(15,23,42,0.04)] px-5 sm:px-6 py-6">
			<!-- Heading -->
			<div class="mb-6 text-center">
				<h1 class="text-2xl sm:text-3xl font-semibold text-slate-900 tracking-tight">
					{{ selectedUser.fullname }}
				</h1>
				<p class="mt-1 text-sm text-slate-500">Update your profile details and photo</p>
			</div>

			<!-- Profile Image -->
			<div class="flex justify-center mb-8">
				<div class="relative w-28 h-28 sm:w-36 sm:h-36">
					<img
						[src]="imagePreviewUrl ? imagePreviewUrl : selectedUser.profileImage"
						alt="Profile"
						class="w-full h-full object-cover rounded-2xl border border-slate-200 bg-white shadow-[0_10px_30px_rgba(15,23,42,0.10)]" />

					<input
						type="file"
						id="uploadImage"
						name="image"
						accept="image/*"
						class="hidden"
						(change)="onImageSelect($event)" />

					<label
						for="uploadImage"
						class="absolute -bottom-2 -right-2 inline-flex items-center justify-center h-11 w-11 rounded-2xl bg-white border border-slate-200 shadow-[0_10px_30px_rgba(15,23,42,0.12)] text-slate-700 hover:text-slate-900 hover:border-slate-300 hover:shadow-[0_10px_30px_rgba(15,23,42,0.16)] transition cursor-pointer"
						aria-label="Edit profile picture">
						<i class="fa-solid fa-pen-to-square text-sm"></i>
					</label>
				</div>
			</div>

			<!-- Form -->
			<form [formGroup]="userForm" (ngSubmit)="updateUser()" class="space-y-6">
				<div class="space-y-2">
					<label class="block text-sm font-semibold text-slate-700">First Name</label>
					<input
						class="w-full h-11 sm:h-12 px-4 rounded-xl text-sm sm:text-base text-slate-900 bg-white border border-slate-200 shadow-[0_1px_0_rgba(15,23,42,0.04)] placeholder:text-slate-400 focus:outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-300 transition disabled:bg-slate-50 disabled:text-slate-500"
						placeholder="First Name"
						formControlName="firstname"
						type="text" />
				</div>

				<div class="space-y-2">
					<label class="block text-sm font-semibold text-slate-700">Last Name</label>
					<input
						class="w-full h-11 sm:h-12 px-4 rounded-xl text-sm sm:text-base text-slate-900 bg-white border border-slate-200 shadow-[0_1px_0_rgba(15,23,42,0.04)] placeholder:text-slate-400 focus:outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-300 transition disabled:bg-slate-50 disabled:text-slate-500"
						placeholder="Last Name"
						formControlName="lastname"
						type="text" />
				</div>

				<div class="space-y-2">
					<label class="block text-sm font-semibold text-slate-700">Bio</label>
					<textarea
						class="w-full px-4 py-3 rounded-2xl text-sm sm:text-base text-slate-900 bg-white border border-slate-200 shadow-[0_1px_0_rgba(15,23,42,0.04)] placeholder:text-slate-400 focus:outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-300 transition resize-none"
						placeholder="Bio"
						formControlName="bio"
						rows="4"></textarea>
				</div>

				<button
					type="submit"
					[disabled]="userForm.invalid"
					class="w-full inline-flex items-center justify-center rounded-xl bg-slate-900 text-white py-2.5 sm:py-3 text-sm sm:text-base font-semibold shadow-[0_1px_0_rgba(15,23,42,0.12)] hover:bg-slate-950 hover:shadow-[0_10px_30px_rgba(15,23,42,0.18)] transition disabled:opacity-50 disabled:cursor-not-allowed">
					Save Changes
				</button>
			</form>
		</div>
	</div>
</div>

}
