@if (munroLoading) {
<app-loading-indicator></app-loading-indicator>
} @else {

<div class="w-full max-w-xl mx-auto md:mx-0">
	<!-- Back Button -->
	<a
		class="flex items-center gap-2 text-gray-500 hover:text-black transition-colors mb-8"
		[routerLink]="['/dashboard/mountain-manager']"
		aria-label="Back to Munro Manager"
		type="button">
		<i class="fa-solid fa-arrow-left-long"></i>
		<span class="font-medium">Back</span>
	</a>

	<div class="flex items-center justify-between gap-4 mb-6">
		<div>
			<!-- Heading -->
			<h1 class="text-3xl md:text-4xl font-bold text-gray-900 tracking-tight leading-tight">
				{{ selectedMunro.hill_name }}
			</h1>

			<!-- Height -->
			<p class="text-gray-400 text-lg">{{ selectedMunro.height }}m</p>
		</div>
		<img
			[src]="selectedMunro.image_url"
			alt="{{ selectedMunro.hill_name }}"
			class="w-20 h-20 object-cover rounded-full" />
	</div>

	<!-- Completed Badge -->
	@if(!isNewCompletedMunro) {
	<div class="mb-6">
		<span class="bg-green-800 text-white text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full">
			Completed
		</span>
	</div>
	}

	<!-- Form -->
	<form [formGroup]="completedMunroForm" (ngSubmit)="saveCompletedMunro()" class="space-y-7">
		<div>
			<label for="notes" class="block text-sm font-medium text-gray-700 mb-2">Notes</label>
			<textarea
				id="notes"
				formControlName="notes"
				class="w-full p-4 text-base border border-gray-200 rounded-xl focus:outline-none focus:border-black transition disabled:bg-gray-100"
				rows="4"
				placeholder="Any notes about your hike..."></textarea>
		</div>

		<div>
			<label class="block text-sm font-medium text-gray-700 mb-2">Rating</label>
			<app-rating [rating]="completedMunro.rating" (ratingChange)="onRatingChanged($event)"></app-rating>
		</div>

		<!-- Hike Photos Gallery Section -->
		<div class="mb-8">
			<div class="flex items-center justify-between mb-4">
				<h2 class="text-lg font-semibold text-gray-900">Hike Photos</h2>
				<button
					type="button"
					class="border px-6 border-gray-200 bg-white text-black py-3 rounded-xl font-semibold hover:bg-gray-100 transition cursor-pointer mb-4"
					disabled>
					<i class="fa-solid fa-upload mr-2"></i>
					Upload Photos
				</button>
			</div>

			<!-- Responsive Gallery Grid -->
			<div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
				<!-- Example Images: Replace src with actual uploads -->
				<div class="relative group rounded-xl overflow-hidden shadow hover:shadow-lg transition">
					<img
						src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80"
						alt="Hike photo 1"
						class="w-full h-36 object-cover group-hover:scale-105 transition" />
				</div>
				<div class="relative group rounded-xl overflow-hidden shadow hover:shadow-lg transition">
					<img
						src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=600&q=80"
						alt="Hike photo 2"
						class="w-full h-36 object-cover group-hover:scale-105 transition" />
				</div>
				<div class="relative group rounded-xl overflow-hidden shadow hover:shadow-lg transition">
					<img
						src="https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&fit=crop&w=600&q=80"
						alt="Hike photo 3"
						class="w-full h-36 object-cover group-hover:scale-105 transition" />
				</div>
				<!-- Add more <div> blocks for more photos -->
			</div>
		</div>

		<button
			type="submit"
			[disabled]="completedMunroForm.invalid"
			class="w-full bg-black text-white py-3 rounded-xl font-semibold hover:bg-gray-900 transition disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer">
			Save
		</button>
	</form>

	<!-- Mark as incomplete -->
	@if(!isNewCompletedMunro) {
	<button
		(click)="removeCompletedMunro()"
		type="button"
		class="w-full mt-4 border border-gray-200 bg-white text-black py-3 rounded-xl font-semibold hover:bg-gray-100 transition cursor-pointer">
		Mark as incomplete
	</button>
	}
</div>
}
