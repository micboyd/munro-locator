@if(munrosLoading) {
<app-loading-indicator></app-loading-indicator>
} @else {
<div class="flex flex-col lg:flex-row h-full">
	<!-- Side One: Munro Manager -->
	<div class="w-full lg:w-1/2 h-[60vh] lg:h-full overflow-auto px-2 sm:px-4 lg:pr-6">
		<h1 class="mb-4 font-semibold text-2xl sm:text-3xl md:text-4xl">Munro Manager</h1>
		<app-tabs>
			<app-tab-item [title]="allTitle" [active]="true">
				<ng-template>
					<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6">
						<div
							*ngFor="let munro of allUserMunros"
							class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 relative">
							<div class="relative">
								<img
									[src]="munro.image_url"
									alt="Munro image"
									class="w-full h-40 sm:h-48 object-cover" />
								<span
									*ngIf="munro.completed"
									class="absolute top-2 left-2 bg-green-800 text-white text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full">
									Completed
								</span>
							</div>
							<div class="p-4">
								<div class="flex items-center justify-between mb-2">
									<h2 class="text-base sm:text-lg font-semibold text-gray-800">
										{{ munro.hill_name }}
									</h2>
									<a [routerLink]="munro._id" class="ml-2 transition" title="View Munro Details">
										<i class="fa-solid fa-pen-to-square"></i>
									</a>
								</div>
							</div>
						</div>
					</div>
				</ng-template>
			</app-tab-item>
			<app-tab-item [title]="allCompletedTitle">
				<ng-template>
					<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6">
						@for (munro of allCompletedUserMunros; track munro._id) {
						<div
							class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 relative">
							<div class="relative">
								<img
									[src]="munro.image_url"
									alt="Munro image"
									class="w-full h-40 sm:h-48 object-cover" />
								@if (munro.completed) {
								<span
									class="absolute top-2 left-2 bg-green-800 text-white text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full">
									Completed
								</span>
								}
							</div>
							<div class="p-4">
								<div class="flex items-center justify-between mb-2">
									<h2 class="text-base sm:text-lg font-semibold text-gray-800">
										{{ munro.hill_name }}
									</h2>
									<a [routerLink]="munro._id" class="ml-2 transition" title="View Munro Details">
										<i class="fa-solid fa-pen-to-square"></i>
									</a>
								</div>
							</div>
						</div>
						}
					</div>
				</ng-template>
			</app-tab-item>
			<app-tab-item [title]="allIncompleteTitle">
				<ng-template>
					<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6">
						<div
							*ngFor="let munro of allIncompleteUserMunros"
							class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 relative">
							<div class="relative">
								<img
									[src]="munro.image_url"
									alt="Munro image"
									class="w-full h-40 sm:h-48 object-cover" />
								<span
									*ngIf="munro.completed"
									class="absolute top-2 left-2 bg-green-800 text-white text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full">
									Completed
								</span>
							</div>
							<div class="p-4">
								<div class="flex items-center justify-between mb-2">
									<h2 class="text-base sm:text-lg font-semibold text-gray-800">
										{{ munro.hill_name }}
									</h2>
									<a [routerLink]="munro._id" class="ml-2 transition" title="View Munro Details">
										<i class="fa-solid fa-pen-to-square"></i>
									</a>
								</div>
							</div>
						</div>
					</div>
				</ng-template>
			</app-tab-item>
		</app-tabs>
	</div>
	<!-- Side Two: Blue background / Map -->
	<div class="w-full lg:w-1/2 h-[40vh] lg:h-full flex items-center justify-center mt-4 lg:mt-0 lg:pl-6">
		<app-map
			[completeMunros]="allCompletedUserMunros"
			[incompleteMunros]="allIncompleteUserMunros"
			class="h-full w-full rounded-xl"></app-map>
	</div>
</div>
}

